/* ORIGINAL STYLES ‚Äî UNCHANGED */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
html{scroll-behavior:smooth;}
body{
  background:radial-gradient(circle at top,#14142d,#0a0a12);
  color:#fff;
  text-align:center;
  overflow-x:hidden;
}
.hidden{display:none;}

section{
  min-height:100vh;
  padding:80px 20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.subtitle{color:#cfcfea;margin-bottom:20px;}

.card{
  background:rgba(255,255,255,.08);
  padding:30px;
  border-radius:20px;
  max-width:650px;
  line-height:1.7;
}

/* GALLERY */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:26px;
  max-width:1200px;
  margin-top:30px;
}

.gallery img{
  width:100%;
  height:300px;
  object-fit:contain;
  background:rgba(255,255,255,.05);
  padding:12px;
  border-radius:20px;
  box-shadow:0 0 35px rgba(123,92,255,.35),0 0 80px rgba(123,92,255,.18);
  opacity:0;
  transform:translateY(30px) scale(.96);
  transition:opacity 1.2s ease, transform 1.2s ease;
}
.gallery img.show{opacity:1;transform:translateY(0) scale(1);}

button{
  background:linear-gradient(135deg,#7b5cff,#b38bff);
  border:none;
  padding:14px 34px;
  border-radius:40px;
  color:#fff;
  cursor:pointer;
  font-size:1rem;
  box-shadow:0 12px 25px rgba(123,92,255,.35);
}

#nextWrapper{padding:40px 0 60px;}

/* DIM OVERLAY */
#dimOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  opacity:0;
  pointer-events:none;
  transition:.6s;
}
#dimOverlay.active{opacity:1;}

/* FINAL MESSAGE */
#finalEnd{min-height:100vh;display:flex;align-items:center;justify-content:center;}
.final-line{
  font-size:2rem;
  line-height:1.6;
  opacity:0;
  transform:translateY(30px);
  transition:opacity 1.5s ease,transform 1.5s ease;
}
.showFinal .final-line{opacity:1;transform:translateY(0);}

/* FLOATING PARTICLES */
#floating-container span{
  position:fixed;
  bottom:-60px;
  pointer-events:none;
  z-index:1;
  opacity:0;
  animation:floatUp linear forwards;
}
@keyframes floatUp{
  0%{transform:translateY(0) scale(.8);opacity:0;}
  10%{opacity:.9;}
  100%{transform:translateY(-120vh) scale(1.4);opacity:0;}
}

/* üéÇ CAKE */
#cakeSection{position:relative;}
.gift-box{
  width:160px;height:160px;
  background:linear-gradient(135deg,#7b5cff,#b38bff);
  border-radius:20px;
  box-shadow:0 0 40px rgba(123,92,255,.6);
}
.gift-box.open{animation:boxOpen 1.4s forwards;}
@keyframes boxOpen{to{transform:scale(0);opacity:0;}}

.cake{
  width:220px;height:140px;
  background:linear-gradient(#fff,#e6d9ff);
  border-radius:20px;
  box-shadow:0 0 60px rgba(255,215,255,.8);
  margin-top:20px;
}
.candles{
  height:30px;
  background:radial-gradient(circle,#ffdf6b,#ff9f00);
  animation:flicker .8s infinite alternate;
}
@keyframes flicker{from{opacity:.7;}to{opacity:1;}}
.cake-name{color:gold;margin-top:10px;font-weight:600;}
.knife{width:120px;height:6px;background:silver;margin-top:30px;}
/* ORIGINAL CSS ABOVE REMAINS UNCHANGED */

/* üéÇ REALISTIC CAKE */
#cakeSection{text-align:center;}

.cake-wrapper{
  position:relative;
  margin-bottom:30px;
}

.cake{
  width:160px;
  height:120px;
  background:
    linear-gradient(#fff,#f3d9ff),
    repeating-linear-gradient(
      0deg,
      #e8b6ff 0,
      #e8b6ff 6px,
      #fff 6px,
      #fff 12px
    );
  border-radius:0 0 20px 20px;
  box-shadow:0 0 40px rgba(255,200,255,.8);
  display:inline-block;
  transition:transform 1.2s ease;
}

.cake-left{border-radius:20px 0 0 20px;}
.cake-right{border-radius:0 20px 20px 0;}

.cake.cut-left{transform:translateX(-40px) rotate(-6deg);}
.cake.cut-right{transform:translateX(40px) rotate(6deg);}

.candles{
  position:absolute;
  top:-45px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:18px;
}

.candle{
  width:10px;
  height:40px;
  background:#fff;
  border-radius:5px;
  position:relative;
}

.flame{
  width:10px;
  height:14px;
  background:radial-gradient(circle,#ff0,#ff6a00);
  position:absolute;
  top:-14px;
  left:0;
  border-radius:50%;
  animation:flicker .7s infinite alternate;
}

@keyframes flicker{
  from{transform:scale(.9);}
  to{transform:scale(1.1);}
}

.cake-name{
  margin-top:12px;
  font-weight:600;
  color:gold;
  text-shadow:0 0 12px gold;
}

#cutText{
  margin:20px 0;
  font-size:1.1rem;
  color:#ffdfff;
}
/* ONLY ADDITIONS ‚Äì EXISTING STYLES UNCHANGED */

#loveMessageSection{
  display:flex;
  justify-content:center;
  align-items:center;
}

#toGrandmaBtn{
  background:linear-gradient(135deg,#ffd1e8,#b38bff);
  font-size:1.2rem;
  padding:18px 40px;
  border-radius:50px;
  box-shadow:0 0 40px rgba(255,180,220,.6);
}
/* ADDITIONS ONLY */

/* üïØÔ∏è Candle smoke */
.smoke{
  position:absolute;
  top:-10px;
  left:-6px;
  width:20px;
  height:20px;
  background:radial-gradient(circle,rgba(200,200,200,.6),transparent);
  border-radius:50%;
  opacity:0;
}

.smoke.show{
  animation:smokeRise 2.5s ease-out forwards;
}

@keyframes smokeRise{
  0%{opacity:0;transform:translateY(0) scale(.5);}
  20%{opacity:.6;}
  100%{opacity:0;transform:translateY(-50px) scale(1.4);}
}

/* ‚ú® Sparkle fade overlay */
#sparkleFade{
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 20% 30%,rgba(255,255,255,.08),transparent 40%),
    radial-gradient(circle at 70% 60%,rgba(255,255,255,.06),transparent 45%);
  opacity:0;
  transition:opacity 1.8s ease;
  z-index:5;
}

#sparkleFade.active{opacity:1;}
/* üî∏ ADDITIONS ONLY */

/* ‚ú® Name glow pulse */
.cake-name.glow{
  animation:nameGlow 3s ease-in-out infinite;
}

@keyframes nameGlow{
  0%{text-shadow:0 0 10px gold;}
  50%{text-shadow:0 0 30px gold,0 0 60px rgba(255,215,255,.8);}
  100%{text-shadow:0 0 10px gold;}
}

/* üå∏ Floating petals (grandma only) */
.petal{
  position:fixed;
  top:-20px;
  font-size:18px;
  opacity:.6;
  animation:petalFall linear forwards;
  pointer-events:none;
  z-index:2;
}

@keyframes petalFall{
  to{transform:translateY(110vh) rotate(360deg);opacity:0;}
}

/* üåô Halo glow behind grandma card */
.halo{
  position:absolute;
  width:300px;
  height:300px;
  background:radial-gradient(circle,rgba(255,255,255,.12),transparent 70%);
  border-radius:50%;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:0;
}

.grandma-card{
  position:relative;
  z-index:1;
}
/* üòÑ Fake bug message */
#fakeBug{
  margin-top:20px;
  padding:14px 22px;
  background:rgba(0,0,0,.6);
  border-radius:12px;
  font-size:.95rem;
  box-shadow:0 0 25px rgba(255,255,255,.15);
  animation:fadeBug 2.5s forwards;
}

@keyframes fadeBug{
  0%{opacity:0;}
  10%{opacity:1;}
  80%{opacity:1;}
  100%{opacity:0;}
}

/* üòà Don't click button */
#dontClickBtn{
  margin-top:16px;
  background:linear-gradient(135deg,#ff9a9a,#ff5f5f);
}

/* üòå Spoiled message */
#dontClickMsg{
  margin-top:14px;
  font-size:1rem;
  opacity:0;
  animation:showSpoiled 1.2s forwards;
}

@keyframes showSpoiled{
  to{opacity:1;}
}
/* smooth reveal for the loved-person button */
#loveMessageSection{
  opacity:0;
  transition:opacity 1.2s ease;
}

#loveMessageSection.show{
  opacity:1;
}
/* Caret blink */
.caret{
  display:inline-block;
  margin-right:4px;
  animation:blink 1s steps(1) infinite;
}

@keyframes blink{
  50%{opacity:0;}
}

/* Line reveal */
.reveal-line{
  opacity:0;
  transform:translateY(6px);
  transition:opacity .8s ease,transform .8s ease;
}

.reveal-line.show{
  opacity:1;
  transform:translateY(0);
}
/* üéß Voice Section */
#voiceSection{
  gap:30px;
}

.voice-card{
  background:rgba(255,255,255,.08);
  padding:22px 30px;
  border-radius:18px;
  max-width:500px;
  box-shadow:0 0 30px rgba(123,92,255,.25);
}

.voice-card p{
  margin-bottom:14px;
  font-size:1.05rem;
}

.voice-card.playing{
  box-shadow:0 0 45px rgba(255,200,255,.7);
}
/* üéµ Song Section */
#songSection{
  gap:20px;
}

#songToggleBtn{
  font-size:1.1rem;
  padding:16px 44px;
  box-shadow:0 0 35px rgba(255,200,255,.6);
}
/* üéß Voice & Song */
#voiceSection,#songSection{
  gap:30px;
}

.voice-card{
  background:rgba(255,255,255,.08);
  padding:22px 30px;
  border-radius:18px;
  max-width:500px;
  box-shadow:0 0 30px rgba(123,92,255,.25);
}

.voice-card.playing{
  box-shadow:0 0 45px rgba(255,200,255,.7);
}
/* üì± MOBILE FIRST FIX */
html, body{
  width:100%;
  height:100%;
  overscroll-behavior:none;
}

/* Prevent horizontal scroll */
body{
  max-width:100vw;
}

/* Main container behaves like phone screen */
#mainContent, #lockScreen{
  max-width:480px;          /* phone width */
  margin:0 auto;
}

/* Center lock screen on phones */
#lockScreen{
  padding:30px 20px;
}

/* Better spacing on small screens */
@media (max-width:600px){

  section{
    padding:60px 16px;
  }

  h1{
    font-size:1.8rem;
  }

  h2{
    font-size:1.4rem;
  }

  p{
    font-size:0.95rem;
    line-height:1.6;
  }

  .subtitle{
    font-size:0.95rem;
  }

  button{
    width:100%;
    max-width:320px;
    font-size:1rem;
    padding:14px 0;
  }

  input{
    width:100%;
    max-width:320px;
  }

  .card{
    padding:22px;
    border-radius:18px;
  }

  /* Gallery mobile fix */
  .gallery{
    grid-template-columns:1fr;
  }

  .gallery img{
    height:240px;
  }

  /* Cake resize */
  .cake{
    width:140px;
    height:100px;
  }

  .cake-name{
    font-size:0.95rem;
  }

  /* Voice cards */
  .voice-card{
    width:100%;
    max-width:340px;
  }

  /* Final message */
  .final-line{
    font-size:1.4rem;
    padding:0 10px;
  }
}

/* üì± Safe area support (iPhone notch) */
@supports (padding: env(safe-area-inset-top)){
  body{
    padding-top:env(safe-area-inset-top);
    padding-bottom:env(safe-area-inset-bottom);
  }
}
/* üì∏ MOBILE IMAGE FIX ‚Äì VERTICAL STORY STYLE */
@media (max-width: 600px){

  #imagesSection{
    padding-top:40px;
  }

  .gallery{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:40px;
  }

  .gallery img{
    width:92%;
    height:auto;                 /* IMPORTANT: no cropping */
    max-height:none;
    object-fit:contain;
    opacity:0;
    transform:translateY(40px) scale(.96);
    transition:
      opacity 2s ease,
      transform 2s ease,
      box-shadow 2s ease;
    
    /* Royal soft light */
    box-shadow:
      0 0 25px rgba(180,140,255,.35),
      0 0 60px rgba(123,92,255,.25);
  }

  .gallery img.show{
    opacity:1;
    transform:translateY(0) scale(1);
    box-shadow:
      0 0 35px rgba(200,170,255,.55),
      0 0 90px rgba(123,92,255,.45);
  }
}
/* ============================= */
/* üîê UNLOCK SCREEN ANIMATIONS   */
/* ============================= */

/* Initial hidden state for main content */
.main-hidden{
  opacity:0;
  transform:translateY(40px);
}

/* Main content reveal */
.main-show{
  opacity:1;
  transform:translateY(0);
  transition:opacity 1s ease, transform 1s ease;
}

/* Lock screen exit animation */
.lock-exit{
  animation:lockExit 0.9s ease forwards;
}

@keyframes lockExit{
  0%{
    opacity:1;
    transform:translateY(0) scale(1);
  }
  100%{
    opacity:0;
    transform:translateY(-60px) scale(0.96);
  }
}

/* Wrong password shake */
.shake{
  animation:shakeX 0.45s ease;
}

@keyframes shakeX{
  0%{transform:translateX(0);}
  20%{transform:translateX(-10px);}
  40%{transform:translateX(10px);}
  60%{transform:translateX(-8px);}
  80%{transform:translateX(8px);}
  100%{transform:translateX(0);}
}
/* üîä Volume hint on lock screen */
.volume-hint{
  margin-top:14px;
  font-size:0.9rem;
  color:rgba(255,255,255,0.75);
  animation:volumePulse 2.2s ease-in-out infinite;
}

@keyframes volumePulse{
  0%{opacity:0.4;}
  50%{opacity:0.9;}
  100%{opacity:0.4;}
}
/* üì± FORCE VOLUME HINT VISIBILITY ON PHONES */
@media (max-width:600px){

  .volume-hint{
    display:block;
    margin-top:18px;
    font-size:0.95rem;
    color:#ffffff;
    opacity:0.9;
    text-shadow:0 0 8px rgba(255,255,255,0.35);
  }

  #lockScreen{
    padding-bottom:40px; /* ensures text stays on screen */
  }
}
